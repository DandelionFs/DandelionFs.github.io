<!doctype html>
<html lang="en-us">

<head>
    <meta charset="utf-8">
    <meta name="generator" content="Hugo 0.82.0" />

    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
    
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Database - @bGZoCg">
    <meta name="twitter:description" content="本文参考:
 X分钟速成Y-SQL MySQL_基础&#43;高级篇- 数据库 -sql -mysql教程_mysql视频_mysql入门_尚硅谷. 尚硅谷MySQL核心技术基础知识笔记 ">
    <meta name="twitter:site" content="https://bgzocg.me/">
    <meta name="twitter:creator" content="">
    <meta name="twitter:image" content="https://dandelionfs.oss-cn-beijing.aliyuncs.com/bgzocg_avator.jpg">
    
    
    <meta property="og:locale" content="en-us">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Database - @bGZoCg">
    <meta property="og:description" content="本文参考:
 X分钟速成Y-SQL MySQL_基础&#43;高级篇- 数据库 -sql -mysql教程_mysql视频_mysql入门_尚硅谷. 尚硅谷MySQL核心技术基础知识笔记 ">
    <meta property="og:url" content="https://bgzocg.me/database/">
    <meta property="og:site_name" content="@bGZoCg">
    <meta property="og:image" content="https://dandelionfs.oss-cn-beijing.aliyuncs.com/bgzocg_avator.jpg">
    
    <title>Database - @bGZoCg</title>

    <meta name="author" content="bGZoCg">
    <meta name="description" content="本文参考:
 X分钟速成Y-SQL MySQL_基础&#43;高级篇- 数据库 -sql -mysql教程_mysql视频_mysql入门_尚硅谷. 尚硅谷MySQL核心技术基础知识笔记 ">

    
    

    
    

    
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Code+Pro|Arvo:400,700">
    <link rel="stylesheet" href="https://bgzocg.me/css/theme.css">
    <link rel="stylesheet" href="https://bgzocg.me/css/chroma.dracula.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>🌈</text></svg>">
</head>
<body class="font-serif bg-gray-200 border-t-4 border-blue-500 antialiased">
    <div class="w-full p-6 md:w-2/3 md:px-0 md:mx-auto xl:w-2/5">
        <header class="mb-6">
            
            <div class="mb-6 md:flex md:items-center">
                
<div>
    <a class="text-lg mb-8 inline-block" href="/">&larr; Back Home</a>

    
    
    <h1 class="text-4xl font-bold">Database</h1>
    <time datetime="2021-01-28 17:39:35 CST">28 Jan 2021</time>
    
    
    
    <ol class="mt-4">
        
        <li class="inline-block">
            <a class="border-none text-gray-800 text-xs bg-gray-400 hover:bg-gray-600 hover:text-white rounded-sm px-3 py-1" href="https://bgzocg.me/tags/db">DB</a>
        </li>
        
    </ol>
    
</div>

            </div>

            
            
        </header>

        
        
<article class="mb-12">
    <p>本文参考:</p>
<ul>
<li><a href="https://learnxinyminutes.com/docs/zh-cn/sql/">X分钟速成Y-SQL</a></li>
<li><a href="https://www.bilibili.com/video/BV12b411K7Zu">MySQL_基础+高级篇- 数据库 -sql -mysql教程_mysql视频_mysql入门_尚硅谷</a>.</li>
<li><a href="https://www.jianshu.com/p/91856df6b6f9">尚硅谷MySQL核心技术基础知识笔记</a></li>
</ul>
<h2 id="好处">好处</h2>
<ol>
<li>持久化数据到本地</li>
<li>可以实现结构化查询, 方便管理</li>
</ol>
<h3 id="概念">概念</h3>
<ol>
<li>DB：数据库, 保存一组有组织的数据的容器</li>
<li>DBMS：数据库管理系统, 又称为数据库软件(产品), 用于管理DB中的数据</li>
<li>SQL:结构化查询语言, 用于和DBMS通信的语言</li>
</ol>
<h2 id="存储特点">存储特点</h2>
<ol>
<li>将数据放到表中, 表再放到库中</li>
<li>一个数据库中可以有多个表, 每个表都有一个的名字, 用来标识自己。表名具有唯一性。</li>
<li>表具有一些特性, 这些特性定义了数据在表中如何存储, 类似java中 “类”的设计。</li>
<li>表由列组成, 我们也称为字段。所有表都是由一个或多个列组成的, 每一列类似java 中的”属性”</li>
<li>表中的数据是按行存储的, 每一行类似于java中的“对象”。</li>
</ol>
<h2 id="命令">命令</h2>
<div class="highlight"><pre class="chroma"><code class="language-mysql" data-lang="mysql"><span class="k">show</span> <span class="k">databases</span><span class="p">;</span> <span class="c1">#查看当前所有的数据库
</span><span class="c1"></span><span class="k">use</span> <span class="err">库名</span> <span class="c1">#打开指定的库
</span><span class="c1"></span><span class="k">show</span> <span class="kp">tables</span><span class="p">;</span> <span class="c1"># 查看当前库的所有表
</span><span class="c1"></span><span class="k">show</span> <span class="kp">tables</span> <span class="k">from</span> <span class="err">库名</span><span class="p">;</span><span class="c1"># 查看其它库的所有表
</span><span class="c1"></span><span class="k">create</span> <span class="k">table</span> <span class="err">表名</span><span class="p">(</span>
	<span class="n">name</span> <span class="n">type</span><span class="p">;</span>
    <span class="n">name</span> <span class="n">type</span><span class="p">;</span>
    <span class="p">...</span>
<span class="p">);</span> <span class="c1"># 创建表
</span><span class="c1"></span><span class="k">desc</span> <span class="err">表名</span><span class="p">;</span> <span class="c1"># 查看表结构
</span><span class="c1"></span><span class="k">select</span> <span class="nf">version</span><span class="p">();</span> <span class="c1"># 查看服务器的版本 登录到mysql服务端
</span><span class="c1"></span><span class="n">mysql</span> <span class="o">--</span><span class="n">version</span> <span class="c1"># 查看服务器的版本 没有登录到mysql服务端
</span><span class="c1"></span><span class="n">mysql</span> <span class="o">--</span><span class="n">V</span>
</code></pre></div><h2 id="语法规范">语法规范</h2>
<ol>
<li>不区分大小写,但建议关键字大写, 表名、列名小写</li>
<li>每条命令最好用分号结尾</li>
<li>每条命令根据需要, 可以进行缩进 或换行</li>
<li>注释
<code>单行注释：#注释文字</code>
<code>单行注释：-- 注释文字</code>
<code>多行注释：/* 注释文字  */</code></li>
</ol>
<h2 id="语言分类">语言分类</h2>
<ul>
<li><strong>DQL(Data Query Language)</strong> : 数据查询语言 select</li>
<li><strong>DML(Data Manipulate Language)</strong> : 数据操作语言 insert 、update、delete</li>
<li><strong>DDL(Data Define Languge)</strong> : 数据定义语言 create、drop、alter</li>
<li><strong>TCL(Transaction Control Language)</strong> : 事务控制语言 commit、rollback</li>
</ul>
<h2 id="查询">查询</h2>
<p>基础查询如上.</p>
<h3 id="条件查询">条件查询</h3>
<ul>
<li>
<p>表达式: <code>select + 要查询的字段|表达式|常量值|函数 + from + 表 + where + 条件</code> ;</p>
</li>
<li>
<p>条件表达式: <code>salary&gt;10000</code></p>
<ul>
<li>条件运算符：<code>&gt; &lt; &gt;= &lt;= = != &lt;&gt;</code></li>
</ul>
</li>
<li>
<p>逻辑表达式
示例：<code>salary&gt;10000 &amp;&amp; salary&lt;20000</code></p>
<ul>
<li>逻辑运算符：
<ul>
<li>and(&amp;&amp;):两个条件如果同时成立, 结果为true, 否则为false</li>
<li>or(||)：两个条件只要有一个成立, 结果为true, 否则为false</li>
<li>not(!)：如果条件成立, 则not后为false, 否则为true</li>
</ul>
</li>
</ul>
</li>
<li>
<p>模糊查询: <code>last_name like 'a%'</code></p>
</li>
</ul>
<h3 id="排序查询">排序查询</h3>
<p><code>order by 排序的字段|表达式|函数|别名 【asc|desc】</code></p>
<h3 id="分组查询">分组查询</h3>
<p><code>group by 分组的字段</code></p>
<ul>
<li>特点:
<ul>
<li>可以按单个字段分组</li>
<li>和分组函数一同查询的字段最好是分组后的字段</li>
<li>分组筛选
针对的表    位置          关键字
分组前筛选：  原始表     group by的前面     where
分组后筛选：  分组后的结果集 group by的后面     having</li>
<li>可以按多个字段分组, 字段之间用逗号隔开</li>
<li>可以支持排序</li>
<li>having后可以支持别名</li>
</ul>
</li>
</ul>
<h3 id="多表连接查询">多表连接查询</h3>
<ul>
<li>笛卡尔乘积：如果连接条件省略或无效则会出现</li>
<li>解决办法：添加上连接条件</li>
</ul>
<h4 id="等值连接非等值连接">等值连接——非等值连接</h4>
<ol>
<li>等值连接的结果 = 多个表的交集</li>
<li>n表连接, 至少需要n-1个连接条件</li>
<li>多个表不分主次, 没有顺序要求</li>
<li>一般为表起别名, 提高阅读性和性能</li>
</ol>
<h4 id="sql99语法通过join关键字实现连接">sql99语法：通过join关键字实现连接</h4>
<p>支持:</p>
<ul>
<li>等值连接、非等值连接 (内连接)</li>
<li>外连接</li>
<li>交叉连接</li>
</ul>
<p>语句上, 连接条件和筛选条件实现了分离, 简洁明了！</p>
<div class="highlight"><pre class="chroma"><code class="language-mysql" data-lang="mysql"><span class="err">【</span><span class="k">inner</span><span class="o">|</span><span class="k">left</span> <span class="k">outer</span><span class="o">|</span><span class="k">right</span> <span class="k">outer</span><span class="o">|</span><span class="k">cross</span><span class="err">】</span><span class="k">join</span> <span class="err">表</span><span class="mi">2</span> <span class="k">on</span>  <span class="err">连接条件</span>
<span class="err">【</span><span class="k">inner</span><span class="o">|</span><span class="k">left</span> <span class="k">outer</span><span class="o">|</span><span class="k">right</span> <span class="k">outer</span><span class="o">|</span><span class="k">cross</span><span class="err">】</span><span class="k">join</span> <span class="err">表</span><span class="mi">3</span> <span class="k">on</span>  <span class="err">连接条件</span>
<span class="err">【</span><span class="k">where</span> <span class="err">筛选条件】</span>
<span class="err">【</span><span class="k">group</span> <span class="k">by</span> <span class="err">分组字段】</span>
<span class="err">【</span><span class="k">having</span> <span class="err">分组后的筛选条件】</span>
<span class="err">【</span><span class="k">order</span> <span class="k">by</span> <span class="err">排序的字段或表达式】</span>
</code></pre></div><h4 id="自连接">自连接</h4>
<div class="highlight"><pre class="chroma"><code class="language-mysql" data-lang="mysql"><span class="c1"># sql99
</span><span class="c1"></span><span class="k">SELECT</span> <span class="n">e</span><span class="p">.</span><span class="n">last_name</span><span class="p">,</span><span class="n">m</span><span class="p">.</span><span class="n">last_name</span>
<span class="k">FROM</span> <span class="n">employees</span> <span class="n">e</span>
<span class="k">JOIN</span> <span class="n">employees</span> <span class="n">m</span> <span class="k">ON</span> <span class="n">e</span><span class="p">.</span><span class="o">`</span><span class="n">manager_id</span><span class="o">`=</span><span class="n">m</span><span class="p">.</span><span class="o">`</span><span class="n">employee_id</span><span class="o">`</span><span class="p">;</span>
<span class="c1"># sql92
</span><span class="c1"></span><span class="k">SELECT</span> <span class="n">e</span><span class="p">.</span><span class="n">last_name</span><span class="p">,</span><span class="n">m</span><span class="p">.</span><span class="n">last_name</span>
<span class="k">FROM</span> <span class="n">employees</span> <span class="n">e</span><span class="p">,</span><span class="n">employees</span> <span class="n">m</span> 
<span class="k">WHERE</span> <span class="n">e</span><span class="p">.</span><span class="o">`</span><span class="n">manager_id</span><span class="o">`=</span><span class="n">m</span><span class="p">.</span><span class="o">`</span><span class="n">employee_id</span><span class="o">`</span><span class="p">;</span>
</code></pre></div><h3 id="子查询">子查询</h3>
<p>一条查询语句中又嵌套了另一条完整的select语句, 其中被嵌套的select语句, 称为子查询或内查询. 在外面的查询语句, 称为主查询或外查询</p>
<ol>
<li>子查询都放在小括号内</li>
<li>子查询可以放在from后面、select后面、where后面、having后面, 但一般放在条件的右侧</li>
<li>子查询优先于主查询执行, 主查询使用了子查询的执行结果</li>
<li>子查询根据查询结果的行数不同分为以下两类：
5. 单行子查询: 搭配单行操作符使用：<code>&gt; &lt; = &lt;&gt; &gt;= &lt;= </code>, 非法使用子查询的情况：
1. 子查询的结果为一组值
2. 子查询的结果为空
2. 多行子查询: 一般搭配多行操作符使用：<code>any、all、in、not in in</code>：
1. 属于子查询结果中的任意一个就行
2. any和all往往可以用其他查询代替</li>
</ol>
<h4 id="分页查询">分页查询</h4>
<p>实际的web项目中需要根据用户的需求提交对应的分页查询的sql语句</p>
<div class="highlight"><pre class="chroma"><code class="language-mysql" data-lang="mysql"><span class="err">【</span><span class="k">where</span> <span class="err">条件】</span>
<span class="err">【</span><span class="k">group</span> <span class="k">by</span> <span class="err">分组字段】</span>
<span class="err">【</span><span class="k">having</span> <span class="err">条件】</span>
<span class="err">【</span><span class="k">order</span> <span class="k">by</span> <span class="err">排序的字段】</span>
<span class="k">limit</span> <span class="err">【起始的条目索引</span><span class="p">,</span> <span class="err">】条目数</span><span class="p">;</span>
</code></pre></div><p>特点:</p>
<ol>
<li>起始条目索引从0开始</li>
<li>limit子句放在查询语句的最后</li>
<li>公式：<code>select * from  表 limit (page-1)*sizePerPage,sizePerPage</code>; 每页显示条目数sizePerPage, 要显示的页数 page</li>
</ol>
<h4 id="联合查询">联合查询</h4>
<p>引入<code>union</code>联合、合并.</p>
<div class="highlight"><pre class="chroma"><code class="language-mysql" data-lang="mysql"><span class="k">select</span> <span class="err">字段</span><span class="o">|</span><span class="err">常量</span><span class="o">|</span><span class="err">表达式</span><span class="o">|</span><span class="err">函数</span> <span class="err">【</span><span class="k">from</span> <span class="err">表】</span> <span class="err">【</span><span class="k">where</span> <span class="err">条件】</span> <span class="k">union</span> <span class="err">【</span><span class="k">all</span><span class="err">】</span>
<span class="k">select</span> <span class="err">字段</span><span class="o">|</span><span class="err">常量</span><span class="o">|</span><span class="err">表达式</span><span class="o">|</span><span class="err">函数</span> <span class="err">【</span><span class="k">from</span> <span class="err">表】</span> <span class="err">【</span><span class="k">where</span> <span class="err">条件】</span> <span class="k">union</span> <span class="err">【</span><span class="k">all</span><span class="err">】</span>
<span class="k">select</span> <span class="err">字段</span><span class="o">|</span><span class="err">常量</span><span class="o">|</span><span class="err">表达式</span><span class="o">|</span><span class="err">函数</span> <span class="err">【</span><span class="k">from</span> <span class="err">表】</span> <span class="err">【</span><span class="k">where</span> <span class="err">条件】</span> <span class="k">union</span>  <span class="err">【</span><span class="k">all</span><span class="err">】</span>
<span class="p">.....</span>
<span class="k">select</span> <span class="err">字段</span><span class="o">|</span><span class="err">常量</span><span class="o">|</span><span class="err">表达式</span><span class="o">|</span><span class="err">函数</span> <span class="err">【</span><span class="k">from</span> <span class="err">表】</span> <span class="err">【</span><span class="k">where</span> <span class="err">条件】</span>
</code></pre></div><ol>
<li>
<p>起始条目索引从0开始</p>
</li>
<li>
<p>limit子句放在查询语句的最后</p>
</li>
<li>
<p>公式：select * from  表 limit (page-1)*sizePerPage,sizePerPage
假如:
每页显示条目数sizePerPage
要显示的页数 page
进阶9：联合查询
引入：
union 联合、合并</p>
</li>
</ol>
<p><strong>特点:</strong></p>
<ol>
<li>多条查询语句的查询的列数必须是一致的</li>
<li>多条查询语句的查询的列的类型几乎相同</li>
<li>union代表去重, union all代表不去重</li>
</ol>
<h2 id="常见函数">常见函数</h2>
<p>一、单行函数</p>
<ol>
<li>字符函数
<ol>
<li>concat拼接</li>
<li>substr截取子串</li>
<li>upper转换成大写</li>
<li>lower转换成小写</li>
<li>trim去前后指定的空格和字符</li>
<li>ltrim去左边空格</li>
<li>rtrim去右边空格</li>
<li>replace替换</li>
<li>lpad左填充</li>
<li>rpad右填充</li>
<li>instr返回子串第一次出现的索引</li>
<li>length 获取字节个数</li>
</ol>
</li>
<li>数学函数
<ol>
<li>round 四舍五入</li>
<li>rand 随机数</li>
<li>floor向下取整</li>
<li>ceil向上取整</li>
<li>mod取余</li>
<li>truncate截断</li>
</ol>
</li>
<li>日期函数
<ol>
<li>now当前系统日期+时间</li>
<li>curdate当前系统日期</li>
<li>curtime当前系统时间</li>
<li>str_to_date 将字符转换成日期</li>
<li>date_format将日期转换成字符</li>
</ol>
</li>
<li>流程控制函数
<ol>
<li>if 处理双分支</li>
<li>case语句 处理多分支
<ol>
<li>处理等值判断</li>
<li>处理条件判断</li>
</ol>
</li>
</ol>
</li>
<li>其他函数
<ol>
<li>version版本</li>
<li>database当前库</li>
<li>user当前连接用户</li>
</ol>
</li>
</ol>
<h4 id="分组函数">分组函数</h4>
<p>一、单行函数</p>
<ol>
<li>
<p>字符函数
concat拼接
substr截取子串
upper转换成大写
lower转换成小写
trim去前后指定的空格和字符
ltrim去左边空格
rtrim去右边空格
replace替换
lpad左填充
rpad右填充
instr返回子串第一次出现的索引
length 获取字节个数</p>
</li>
<li>
<p>数学函数
round 四舍五入
rand 随机数
floor向下取整
ceil向上取整
mod取余
truncate截断</p>
</li>
<li>
<p>日期函数
now当前系统日期+时间
curdate当前系统日期
curtime当前系统时间
str_to_date 将字符转换成日期
date_format将日期转换成字符</p>
</li>
<li>
<p>流程控制函数
if 处理双分支
case语句 处理多分支
情况1：处理等值判断
情况2：处理条件判断</p>
</li>
<li>
<p>其他函数
version版本
database当前库
user当前连接用户</p>
</li>
</ol>
<h2 id="dml">DML</h2>
<h3 id="插入">插入</h3>
<ul>
<li>
<p><code>insert into 表名(字段名, ...) + values(值1, ...);</code></p>
</li>
<li>
<p>特点</p>
<ul>
<li>字段类型和值类型一致或兼容, 而且一一对应</li>
<li>可以为空的字段, 可以不用插入值, 或用null填充</li>
<li>不可以为空的字段, 必须插入值</li>
<li>字段个数和值的个数必须一致</li>
<li>字段可以省略, 但默认所有字段, 并且顺序和表中的存储顺序一致</li>
<li>字段类型和值类型一致或兼容, 而且一一对应</li>
</ul>
</li>
</ul>
<h3 id="修改">修改</h3>
<h3 id="删除">删除</h3>
<h2 id="ddl">DDL</h2>
<h3 id="库的管理">库的管理</h3>
<div class="highlight"><pre class="chroma"><code class="language-mysql" data-lang="mysql"><span class="k">create</span> <span class="k">database</span> <span class="err">库名</span> <span class="c1"># 创建库
</span><span class="c1"></span><span class="k">drop</span> <span class="k">database</span> <span class="err">库名</span> <span class="c1"># 删除库
</span></code></pre></div><h3 id="表的管理">表的管理</h3>
<h4 id="创建表">创建表</h4>
<div class="highlight"><pre class="chroma"><code class="language-mysql" data-lang="mysql"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="k">IF</span> <span class="k">NOT</span> <span class="k">EXISTS</span> <span class="nf">stuinfo</span><span class="p">(</span>
    <span class="n">stuId</span> <span class="kt">INT</span><span class="p">,</span>
    <span class="n">stuName</span> <span class="kt">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span>
    <span class="n">gender</span> <span class="kt">CHAR</span><span class="p">,</span>
    <span class="n">bornDate</span> <span class="kt">DATETIME</span>
<span class="p">);</span><span class="c1"># 创建表
</span><span class="c1"></span>
<span class="k">DESC</span> <span class="n">studentinfo</span><span class="p">;</span>
</code></pre></div><h4 id="修改表-alter">修改表 alter</h4>
<ul>
<li><code>ALTER TABLE 表名 ADD|MODIFY|DROP|CHANGE COLUMN 字段名 【字段类型】;</code></li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-mysql" data-lang="mysql"><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">studentinfo</span> <span class="k">CHANGE</span>  <span class="k">COLUMN</span> <span class="n">sex</span> <span class="n">gender</span> <span class="kt">CHAR</span><span class="p">;</span><span class="c1">#修改字段名
</span><span class="c1"></span><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">stuinfo</span> <span class="k">RENAME</span> <span class="p">[</span><span class="k">TO</span><span class="p">]</span>  <span class="n">studentinfo</span><span class="p">;</span><span class="c1">#②修改表名
</span><span class="c1"></span><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">studentinfo</span> <span class="n">MODIFY</span> <span class="k">COLUMN</span> <span class="n">borndate</span> <span class="kt">DATE</span> <span class="p">;</span><span class="c1">#③修改字段类型和列级约束
</span><span class="c1"></span><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">studentinfo</span> <span class="k">ADD</span> <span class="k">COLUMN</span> <span class="n">email</span> <span class="kt">VARCHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="c1">#④添加字段first;
</span><span class="c1"></span><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">studentinfo</span> <span class="k">DROP</span> <span class="k">COLUMN</span> <span class="n">email</span><span class="p">;</span><span class="c1">#⑤删除字段
</span></code></pre></div><h4 id="删除表">删除表</h4>
<div class="highlight"><pre class="chroma"><code class="language-mysql" data-lang="mysql"><span class="k">DROP</span> <span class="k">TABLE</span> <span class="p">[</span><span class="k">IF</span> <span class="k">EXISTS</span><span class="p">]</span> <span class="n">studentinfo</span><span class="p">;</span>
</code></pre></div><h3 id="常见类型">常见类型</h3>
<ul>
<li>整型</li>
<li>小数
<ul>
<li>浮点型</li>
<li>定点型</li>
</ul>
</li>
<li>字符型：</li>
<li>日期型：</li>
<li>Blob类型：</li>
</ul>
<h3 id="常见约束">常见约束</h3>
<div class="highlight"><pre class="chroma"><code class="language-mysql" data-lang="mysql"><span class="k">NOT</span> <span class="no">NULL</span>
<span class="k">DEFAULT</span>
<span class="k">UNIQUE</span>
<span class="k">CHECK</span>
<span class="k">PRIMARY</span> <span class="k">KEY</span>
<span class="k">FOREIGN</span> <span class="k">KEY</span>
</code></pre></div><h2 id="事务">事务</h2>
<p>通过一组逻辑操作单元(一组DML——sql语句), 将数据从一种状态切换到另外一种状态</p>
<ul>
<li>
<p><strong>特点:</strong></p>
<ul>
<li>原子性(ACID)：要么都执行, 要么都回滚</li>
<li>一致性：保证数据的状态操作前和操作后保持一致</li>
<li>隔离性：多个事务同时操作相同数据库的同一个数据时, 一个事务的执行不受另外一个事务的干扰</li>
<li>持久性：一个事务一旦提交, 则数据将持久化到本地, 除非其他事务对其进行修改</li>
</ul>
</li>
<li>
<p>分类：隐式事务, 没有明显的开启和结束事务的标志</p>
</li>
</ul>
<h2 id="plan">PLAN</h2>
<ul>
<li>基础篇
<ul>
<li>绪论</li>
<li>关系数据库</li>
<li>关系数据库标准语言SQL</li>
<li>数据库安全性</li>
<li>数据库完整性</li>
</ul>
</li>
<li>设计与应用 开发篇
<ul>
<li>关系数据理论数据库设计</li>
<li>数据库设计</li>
<li>数据库编程</li>
</ul>
</li>
<li>系统篇
<ul>
<li>关系查询处理和查询优化</li>
<li>数据库恢复技术</li>
<li>并发控制</li>
</ul>
</li>
</ul>
<h2 id="people">People</h2>
<ul>
<li>1973年 Charles W. Bachman(1924-2017) 网状数据库技术</li>
<li>1981年 Edgar F. Codd (1923－2003 )数据库系统，尤其是关系型数据库</li>
<li>1998年 Jim Gray (1944-2007.1.28? )数据库与事务处理</li>
<li>2014年 Michael Stonebraker(1943-)现代数据库系统底层的概念与实践</li>
</ul>
<h2 id="dbs">DBs</h2>
<ul>
<li>Foreign
<ul>
<li>大型：
<ul>
<li>甲骨文 Oracle</li>
<li>IBM DB2</li>
<li>Microsoft SQL Server</li>
<li>Sybase</li>
</ul>
</li>
<li>小型
<ul>
<li>ACCESS
-开源</li>
<li>PostgresSQL</li>
<li>MYSQL</li>
<li>berkeley db(BDB)</li>
</ul>
</li>
</ul>
</li>
<li>China
<ul>
<li>华中科技大学: <a href="http://www.dameng.com/">DM</a></li>
<li>中国人民大学: <a href="http://www.kingbase.com.cn">kingbase</a>
<ul>
<li>2018年，国家科技进步二等奖
-东软: <a href="http://www.openbase.com.cn">OpenBASE</a>
-阿里巴巴: <a href="http://code.taobao.org/p/OceanBase/src/">OceanBase</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="paper">PAPER</h2>
<table>
<thead>
<tr>
<th>刊物简称</th>
<th>刊物全称</th>
<th>出版社</th>
<th>网址</th>
</tr>
</thead>
<tbody>
<tr>
<td>TODS</td>
<td>ACM Transactions on Database Systems</td>
<td>ACM</td>
<td><a href="http://www.acm.org/tods/">http://www.acm.org/tods/</a></td>
</tr>
<tr>
<td>VLDBJ</td>
<td>VLDB Journal</td>
<td>Springer- Verlag</td>
<td><a href="http://www.vldb.org/dblp/db/journals/vldb/index.html">http://www.vldb.org/dblp/db/journals/vldb/index.html</a></td>
</tr>
<tr>
<td>TOIS</td>
<td>ACM Transactions on Information and Systems</td>
<td>ACM</td>
<td><a href="http://www.acm.orgpubs/tois/">http://www.acm.orgpubs/tois/</a></td>
</tr>
<tr>
<td>IEEE TKDE</td>
<td>IEEE Transactions on Knowledge and Data Engineering</td>
<td>IEEE Computer Society</td>
<td><a href="http://www.computer.org/tkde/">http://www.computer.org/tkde/</a></td>
</tr>
</tbody>
</table>
<h2 id="meeting">Meeting</h2>
<ul>
<li>ACMSIGMOD: 国际计算机学会数据管理专业委员会(ACM SIGMOD)是国际数据库领域最高级别的国际会议。其主要致力于数据库以及信息技术的研究，开发和应用。</li>
<li>VLDB: 国际超大型数据库会议是一个专门从事超大规模数据库管理理论、方法和应用研究的专业性学术机构，它涉及的内容也很丰富，包括研究及应用的诸多方面，基本上能够较全面地反映当前数据库研究的前沿方向、工业界的最新技术以及各国的研发水平。</li>
<li>ICDE: 数据工程国际学术会议(ICDE)是由IEEE计算机数据工程技术学会(TCDE)主办的数据库领域的最高级别的国际性会议之一。</li>
<li>CCFDBS: 中国计算机学会数据库专业委员会(CHINA COMPUTER FEDERATION DATABASE SOCIETY，简称CCFDBS)是中国计算机学会领导下的数据库学术组织。由数据库专业委员会主办的中国数据库学术会议(NDBC)始于1977年，已成为国内数据库领域较为权威的会议。</li>
</ul>
<h2 id="概述">概述</h2>
<ul>
<li><strong>数据(Data)</strong>: 描述事物的符号记录, 数据库中存储的基本对象
<ul>
<li>特点: 数据与其语义是不可分</li>
</ul>
</li>
<li><strong>数据库(DataBase, DB)</strong>: 长期储存 在计算机内 、有组织的、可共享的大量数据的集合
<ul>
<li>数据按一定的数据模型组织、描述 和储存</li>
<li>可为各种用户共享</li>
<li>冗余度较小</li>
<li>数据独立性较高</li>
<li>易扩展</li>
</ul>
</li>
<li><strong>数据库管理系统(DataBase Management System, DBMS)</strong>: 位于用户与操作系统之间的一层数据管理软件, 科学地组织和存储数据、高效地获取和维护数据
<ul>
<li>功能:
<ul>
<li>数据操纵功能
<ul>
<li>提供数据操纵语言(DML)</li>
<li>实现对数据库的基本操作 (查询、插入、删除和修改)</li>
</ul>
</li>
<li>数据库的事务管理和运行管理
<ul>
<li>数据库在建立、运行和维护时由DBMS统一管理和控制</li>
<li>保证数据的安全性、完整性、多用户对数据的并发使用</li>
<li>发生故障后的系统恢复</li>
</ul>
</li>
<li>数据库的建立和维护功能(实用程序 )
<ul>
<li>数据库初始数据装载转换</li>
<li>数据库转储</li>
<li>介质故障恢复</li>
<li>数据库的重组织</li>
<li>性能监视分析等</li>
</ul>
</li>
<li>其它功能
<ul>
<li>DBMS与网络中其它软件系统的通信</li>
<li>两个DBMS系统的数据转换</li>
<li>异构数据库之间的互访和互操作</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><strong>数据库系统(DBS)</strong>: 由数据库、数据库管理系统、应用系统和数据库管理员组成
的存储、管理、处理和维护 数据的系统
<ul>
<li>构成:
<ul>
<li>数据库</li>
<li>数据库管理系统(及其开发 工具)</li>
<li>应用系统</li>
<li>数据库管理员</li>
</ul>
</li>
<li><strong>特点</strong>
<ul>
<li>数据结构化
<ul>
<li>整体结构化
<ul>
<li>不再仅仅针对某一个应用，而是面向全组织</li>
<li>不仅数据内部结构化，整体是结构化的，数据之间具有联系</li>
</ul>
</li>
<li>数据库中实现的是数据的真正结构化
<ul>
<li>数据的结构用数据模型描述 ，无需程序定义和解释</li>
<li>数据可以变长</li>
<li>数据的最小存取单位是数据项</li>
</ul>
</li>
</ul>
</li>
<li>数据的共享性高，冗余度低，易扩充
<ul>
<li>数据共享
<ul>
<li>减少数据冗余，节约存储空间</li>
<li>避免数据之间的不相容性与不一致性</li>
<li>使系统易于扩充</li>
</ul>
</li>
</ul>
</li>
<li>数据独立性高
<ul>
<li>物理独立性
<ul>
<li>指用户的 应用程序与存 储在磁盘上的 数据库中数据 是相互独立的。当数据的物理存储改变了，应用程序不用改变。</li>
</ul>
</li>
<li>逻辑独立性
<ul>
<li>指用户的应用程序与数据库的逻辑结构是相互独立的 。数据的逻辑结构改变了，用户程序也 可以不变 。</li>
</ul>
</li>
<li>数据独立性是由DBMS的二级映像功能来保证的</li>
</ul>
</li>
<li>数据由DBMS统一管理和控制</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="history">History</h3>
<ul>
<li>数据管理
<ul>
<li>对数据进行分类、组织、编码、存储、检索和维护</li>
<li>数据处理的中心问题</li>
</ul>
</li>
<li>发展过程
<ul>
<li>人工管理阶段(20世纪40年代中&ndash;50年代中)
<ul>
<li>数据的管理者：用户(程序员)，数据不保存</li>
<li>数据面向的对象：某一应用程序</li>
<li>数据的共享程度：无共享、冗余度极大</li>
<li>数据的独立性：不独立，完全依赖于程序</li>
<li>数据的结构化：无结构</li>
<li>数据控制能力：应用程序自己控制</li>
</ul>
</li>
<li>文件系统阶段(20世纪50年代末&ndash;60年代中)</li>
</ul>
</li>
<li>数据的管理者：文件系统，数据可长期保存
<ul>
<li>数据面向的对象：某一应用程序</li>
<li>数据的共享程度：共享性差、冗余度大</li>
<li>数据的结构化：记录内有结构，整体无结构</li>
<li>数据的独立性：独立性差，数据的逻辑结构改变必须</li>
<li>修改应用程序</li>
<li>数据控制能力：应用程序自己控制</li>
<li>数据库系统阶段(20世纪60年代末&ndash;现在)</li>
</ul>
</li>
<li>动力
<ul>
<li>应用需求的推动</li>
<li>计算机硬件的发展</li>
<li>计算机软件的发展</li>
</ul>
</li>
</ul>
<h3 id="数据模型">数据模型</h3>
<ul>
<li>两大类
<ul>
<li><strong>概念模型</strong>: 信息模型，它是按用户的观点来对数据和信息建模，用于数据库设计。</li>
<li>逻辑模型和物理模型
<ul>
<li><strong>逻辑模型</strong>: 主要包括网状 模型、层次模型、关系模型、面向对象模型等，按计算机系统的观点对数据建模，用于DBMS 实现。</li>
<li><strong>物理模型</strong>: 是对数据最底 层的抽象，描述数据在系统 内部的表示方式和存取方法，在磁盘或 磁带上的存储方式和存 取方法。</li>
</ul>
</li>
</ul>
</li>
<li>数据模型的组成要素
<ul>
<li>数据结构</li>
<li>数据操作</li>
<li>完整性约束条件
<ul>
<li>一组完整性规则的集合。</li>
<li>完整性规则：给定的数据模型中数据及其联系所具有的制约和依存规则</li>
<li>用以限定符合数据模型的数据库状态以及状态的变化，以保证数据的正确、有效、相容。</li>
</ul>
</li>
</ul>
</li>
<li>概念模型
<ul>
<li>信息世界
<ul>
<li><strong>实体(Entity)</strong>: 客观存在并可相互区别的事物称为实体。可以是具体的人、事、物或 抽象的概念。</li>
<li>属性(Attribute): 实体所具有的某一特性称为属性。一个实体可以由若干个属性来刻画。</li>
<li>码(Key): 唯一标识实体的属性集称为码</li>
<li>域(Domain): 属性的取值范围称为该属性的域。</li>
<li><strong>实体型(Entity Type)</strong>: 用实体名及其属性名集合来抽象和刻画同类实体称为实体型</li>
<li><strong>实体集(Entity Set)</strong>: 同一类型实体的集合称为实体集</li>
<li>联系(Relationship)
<ul>
<li>现实世界中事物内部以及事物之间的联系,在信息世界中反映为实体内部的联系和实体之间的联系。</li>
<li>实体内部的联系通常是指组成实体的各属性之间的联系</li>
<li><strong>实体之间的联系通常是指不同实体集之间的联系</strong></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>最常用的数据模型
<ul>
<li>层次模型</li>
<li>网状模型</li>
<li>关系模型
<ul>
<li><strong>关系(Relation)</strong>: 一个关系对应通常说的一张表</li>
<li><strong>元组(Tuple)</strong>: 表中的一行即为一个元组</li>
<li><strong>属性(Attribute)</strong>: 表中的一列即为一个属性 ，给每一个属性起一个名称, 即属性名</li>
<li><strong>码(Key)</strong>: 表中的某个属性组，它可以唯一确定一个元组。</li>
<li><strong>域(Domain)</strong>: 属性的取值范围。</li>
<li><strong>分量</strong>: 元组中的一个属性值。</li>
<li><strong>关系模式</strong>: 对关系的描述</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="数据库系统结构">数据库系统结构</h3>
<ul>
<li>数据库系统模式的概念</li>
<li>数据库系统的三级模式结构
<ul>
<li><strong>模式(Schema)</strong>: 逻辑模式, 数据库中全体数据的逻辑结构和特征的描述
<ul>
<li>所有用户的公共数据视图，综合了所有用户的需求</li>
<li>一个数据库只有一个模式</li>
<li>模式的地位：是数据库系统模式结构的中间层
<ul>
<li>与数据的物理存储细节和硬件环境无关</li>
<li>与具体的应用程序、开发工具及高级程序设计语言无关</li>
</ul>
</li>
</ul>
</li>
<li><strong>外模式(External Schema)</strong>: 子模式或用户模式, 数据库用户（包括应用程序员和最终用户）使用的局部数据的逻辑结构和特征的描述
<ul>
<li>数据库用户的数据视图，是与某一应用有关的数据的逻辑表示
-外模式的地位：介于模式与应用之间</li>
<li>模式与外模式的关系：一对多
<ul>
<li>外模式通常是模式的子集</li>
<li>一个数据库可以有多个外模式 。反映了不同的用户的应用需求 、看待数据的方式、对数据保密的要求</li>
<li>对模式中同一数据 ，在外模式中的结构 、类型、长度、保密级别等都可以不同</li>
</ul>
</li>
<li>外模式与应用的关系：一对多
<ul>
<li>同一外模式也可以为某一用户的多个应用系统所使用</li>
<li>但一个应用程序只能使用一个外模式</li>
</ul>
</li>
<li>外模式的用途
<ul>
<li>保证数据库安全性的一个有力措施</li>
<li>每个用户只能看见和访问所对应的外模式中的数据</li>
</ul>
</li>
</ul>
</li>
<li><strong>内模式(Internal Schema)</strong>:是数据物理结构和存储方式的描述
<ul>
<li>是数据在数据库内部的表示方式
<ul>
<li>记录的存储方式（顺序存储，按照B树结构 存储，按hash方法存储）</li>
<li>索引的组织方式</li>
<li>数据是否压缩存储</li>
<li>数据是否加密</li>
<li>数据存储记录结构的规定</li>
</ul>
</li>
<li>一个数据库只有一个内模式</li>
<li>数据库的二级映像功能与数据独立性</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="数据库系统的组成">数据库系统的组成</h3>
<ul>
<li>硬件平台及数据库
<ul>
<li>足够大的内存</li>
<li>足够大的外存</li>
<li>较高的通道能力，提高数据传送率</li>
</ul>
</li>
<li>软件
<ul>
<li>支持DBMS运行的操作系统</li>
<li>与数据库接口的高级语言及其编译系统</li>
<li>以DBMS为核心的应用开发工具</li>
<li>为特定应用环境开发的数据库应用系统</li>
</ul>
</li>
<li>人员
<ul>
<li>数据库管理员: DBA</li>
<li>系统分析员和数据库设计人员</li>
<li>应用程序员</li>
<li>用户
<ul>
<li>偶然用户</li>
<li>简单用户</li>
<li>复杂用户</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="oracle-db">ORACLE DB</h2>
<ul>
<li>Download
<ul>
<li><a href="https://www.oracle.com/database/technologies/xe-prior-releases.html">Oracle Database Express Edition (XE) Release 11.2.0.2.0 (11gR2)</a></li>
<li><a href="https://www.oracle.com/database/technologies/oracle-database-software-downloads.html">Oracle Database Software Downloads</a></li>
</ul>
</li>
<li>Install<sup><a href="#j1">1</a><a href="#j2">2</a><a href="#j3">3</a></sup>
<div class="highlight"><pre class="chroma"><code class="language-shell" data-lang="shell">$ sudo apt install rmp -y <span class="o">&amp;&amp;</span> sudo apt install alien -y
$ sudo alien --scripts -d oracle-xe-11.2.0-1.0.x86_64.rpm
$ sudo dpkg -i oracle-xe_11.2.0-2_amd64.deb
<span class="c1"># /var/lib/dpkg/info/oracle-xe.postinst: line 114: /sbin/chkconfig: No such file or directory You must run &#39;/etc/init.d/oracle-xe configure&#39; as the root user to configure the database.</span>
$ sudo /etc/init.d/oracle-xe configure
<span class="c1"># 安装的时候一大堆目录错过了...</span>
$ reboot
</code></pre></div></li>
</ul>
<h2 id="relationship-db-关系数据库">Relationship DB 关系数据库</h2>
<ul>
<li>关系代数<sup><a href="#j4">4</a></sup>
<ul>
<li>集合运算符: 并(union),差(except), 交(intersection)及笛卡尔积(cartesian product)</li>
<li>专门的关系运算符:
<ul>
<li><strong>选择(select)</strong>:
<ul>
<li>σ <sub>SAL&gt;1000</sub> (EMP): 取出查询工资大于1000的所有员工的信息</li>
</ul>
</li>
<li><strong>投影(projection)</strong>: ：∏<sub>字段序列</sub>(关系)
<ul>
<li>∏<sub>ENAME,SAL</sub>(EMP): 查看所有员工的姓名和工资</li>
</ul>
</li>
<li><strong>连接(join)</strong>
<ul>
<li>∏<sub>ENAME,SAL</sub>(σ<sub>SAL&gt;1000</sub>(EMP)): 求出了所有工资大于1000的员工的名字和工资, 将σ<sub>SAL&gt;1000</sub>(EMP)执行的结果当做一个临时的关系，参与了投影运算得到
<ul>
<li><strong>自然连接(natural join)</strong>
<ul>
<li>∏<sub>name, course_id</sub>(instructor ⋈ teaches): 所有老师的名字以及其所授课程的id</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><strong>除法(division)</strong>
<ul>
<li>原理解析见<a href="https://blog.csdn.net/qq_22627687/article/details/53789362">CSDN博客</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="reference">REFERENCE</h2>
<div id="j1">[1]. https://askubuntu.com/posts/983032/edit</div>
<div id="j2">[2]. https://dba.stackexchange.com/questions/13291/installing-oracle-11g-on-ubuntu-11-10</div>
<div id="j3">[3]. https://docs.oracle.com/cd/E17781_01/install.112/e18802/toc.htm#XEINL123</div>
<div id="j3">[3]. https://www.jianshu.com/p/f7f9440e30a5</div>

    <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "bgzocg" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</article>


        <footer>
            <p>
            &copy; 2021.   <a href=./index.xml> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="icon" style="width:1em;height:1em;fill:white;"><path d="M19.199 24C19.199 13.467 10.533 4.8 0 4.8V0c13.165 0 24 10.835 24 24h-4.801zM3.291 17.415c1.814 0 3.293 1.479 3.293 3.295 0 1.813-1.485 3.29-3.301 3.29C1.47 24 0 22.526 0 20.71s1.475-3.294 3.291-3.295zM15.909 24h-4.665c0-6.169-5.075-11.245-11.244-11.245V8.09c8.727 0 15.909 7.184 15.909 15.91z"/></svg></a>
            </p>
        </footer>
    </div>

    
</body>
</html>
